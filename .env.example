# ProtobankBankC - Environment Configuration
# Copy this file to .env and update with your values
# NEVER commit .env to version control!

# =============================================================================
# ENVIRONMENT
# =============================================================================
NODE_ENV=development
LOG_LEVEL=debug

# =============================================================================
# DATABASE - PostgreSQL
# =============================================================================
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=protobank
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres

# PgBouncer (Connection Pooling)
PGBOUNCER_PORT=6432

# =============================================================================
# CACHE - Redis
# =============================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=redis
REDIS_DB=0

# =============================================================================
# MESSAGE QUEUE - RabbitMQ
# =============================================================================
RABBITMQ_HOST=localhost
RABBITMQ_PORT=5672
RABBITMQ_MGMT_PORT=15672
RABBITMQ_USER=admin
RABBITMQ_PASSWORD=admin
RABBITMQ_VHOST=protobank

# =============================================================================
# SECURITY - JWT & Encryption
# =============================================================================
# IMPORTANT: Change these in production!
JWT_SECRET=change-this-secret-key-to-something-secure-and-random-in-production
JWT_EXPIRY=15m
REFRESH_TOKEN_EXPIRY=7d

# AES-256 encryption key (32 bytes = 64 hex characters)
# Generate with: openssl rand -hex 32
ENCRYPTION_KEY=change-this-32-byte-key-in-production-use-openssl-rand-hex32

# Bcrypt password hashing cost factor (10-12 recommended, 12 for production)
BCRYPT_COST=12

# =============================================================================
# MICROSERVICES - Internal URLs
# =============================================================================
AUTH_SERVICE_URL=http://localhost:3001
USER_SERVICE_URL=http://localhost:3002
ACCOUNT_SERVICE_URL=http://localhost:3003
TRANSACTION_SERVICE_URL=http://localhost:3004
CARD_SERVICE_URL=http://localhost:3005
PAYMENT_SERVICE_URL=http://localhost:3006
NOTIFICATION_SERVICE_URL=http://localhost:3007
ANALYTICS_SERVICE_URL=http://localhost:3008

# =============================================================================
# EMAIL - SMTP Configuration (Optional for development)
# =============================================================================
SMTP_HOST=smtp.mailtrap.io
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=noreply@protobank.local
SMTP_FROM_NAME=Protobank

# =============================================================================
# SMS - Twilio Configuration (Optional for development)
# =============================================================================
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_PHONE_NUMBER=
TWILIO_VERIFY_SERVICE_SID=

# =============================================================================
# PUSH NOTIFICATIONS - Firebase (Optional for development)
# =============================================================================
FIREBASE_PROJECT_ID=
FIREBASE_PRIVATE_KEY=
FIREBASE_CLIENT_EMAIL=
FCM_SERVER_KEY=

# =============================================================================
# PAYMENT GATEWAY - Stripe (Optional for development)
# =============================================================================
STRIPE_PUBLISHABLE_KEY=
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=

# =============================================================================
# KYC VERIFICATION - Third-party service (Optional)
# =============================================================================
KYC_PROVIDER=mock
KYC_API_KEY=
KYC_API_SECRET=

# =============================================================================
# MONITORING - Prometheus & Grafana (Optional for development)
# =============================================================================
PROMETHEUS_PORT=9090
GRAFANA_PORT=3000
GRAFANA_PASSWORD=admin

# =============================================================================
# OBSERVABILITY - APM & Error Tracking (Optional)
# =============================================================================
SENTRY_DSN=
DATADOG_API_KEY=
NEW_RELIC_LICENSE_KEY=

# =============================================================================
# RATE LIMITING
# =============================================================================
RATE_LIMIT_WINDOW=60
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_AUTH_MAX_REQUESTS=5

# =============================================================================
# CORS - Cross-Origin Resource Sharing
# =============================================================================
CORS_ORIGIN=http://localhost:3000,http://localhost:19006
CORS_CREDENTIALS=true

# =============================================================================
# API GATEWAY (If using Kong or custom)
# =============================================================================
API_GATEWAY_PORT=8000
API_GATEWAY_ADMIN_PORT=8001

# =============================================================================
# DEVELOPMENT TOOLS
# =============================================================================
# Enable Swagger/OpenAPI documentation
SWAGGER_ENABLED=true

# Enable request logging
REQUEST_LOGGING=true

# Enable debug mode (verbose errors)
DEBUG_MODE=true

# =============================================================================
# TESTING
# =============================================================================
TEST_DATABASE_URL=postgres://postgres:postgres@localhost:5432/protobank_test
TEST_REDIS_URL=redis://:redis@localhost:6379/15

# =============================================================================
# SECURITY HEADERS
# =============================================================================
# Content Security Policy
CSP_ENABLED=true
CSP_DIRECTIVES=default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'

# HTTP Strict Transport Security (HSTS)
HSTS_ENABLED=true
HSTS_MAX_AGE=31536000

# =============================================================================
# FILE STORAGE (Optional)
# =============================================================================
STORAGE_TYPE=local
STORAGE_PATH=./storage

# AWS S3 (Production)
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-east-1
AWS_S3_BUCKET=

# =============================================================================
# FEATURE FLAGS
# =============================================================================
FEATURE_P2P_TRANSFERS=true
FEATURE_VIRTUAL_CARDS=true
FEATURE_INTERNATIONAL_PAYMENTS=false
FEATURE_CRYPTO_ACCOUNTS=false

# =============================================================================
# COMPLIANCE
# =============================================================================
# Data retention period (days)
DATA_RETENTION_DAYS=2555

# Log retention period (days)
LOG_RETENTION_DAYS=90

# Session timeout (minutes)
SESSION_TIMEOUT=30

# =============================================================================
# NOTES FOR PRODUCTION
# =============================================================================
# 1. Generate secure random keys:
#    - JWT_SECRET: openssl rand -base64 64
#    - ENCRYPTION_KEY: openssl rand -hex 32
#
# 2. Use strong database passwords:
#    - pwgen -s 32 1
#
# 3. Enable SSL/TLS for all services
#
# 4. Use managed services (RDS, ElastiCache, etc.) in production
#
# 5. Store secrets in HashiCorp Vault or cloud secrets manager
#
# 6. Enable all security features (CSP, HSTS, etc.)
#
# 7. Configure proper CORS origins for production domains
#
# 8. Enable monitoring and alerting
#
# 9. Set up automated backups
#
# 10. Review and update all API keys before going live
